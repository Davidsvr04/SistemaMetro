<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Metro Medellín - Calculador de Rutas</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="header-content">
                <i class="fas fa-subway"></i>
                <h1>Metro Medellín - Sistema de Rutas Inteligente</h1>
                <p>Calculador de rutas óptimas con algoritmo de Dijkstra</p>
            </div>
        </header>

        <main class="main-content">
            <div class="controls-panel">
                <div class="route-selector">
                    <h2><i class="fas fa-route"></i> Planificar Ruta</h2>
                    
                    <div class="input-group">
                        <label for="origen">
                            <i class="fas fa-map-marker-alt origin-icon"></i>
                            Estación de Origen
                        </label>
                        <select id="origen" class="station-select">
                            <option value="">Seleccione estación de origen</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="destino">
                            <i class="fas fa-map-marker-alt destination-icon"></i>
                            Estación de Destino
                        </label>
                        <select id="destino" class="station-select">
                            <option value="">Seleccione estación de destino</option>
                        </select>
                    </div>

                    <div class="input-group">
                        <label for="criterio">
                            <i class="fas fa-sliders-h"></i>
                            Criterio de Optimización
                        </label>
                        <select id="criterio" class="station-select">
                            <option value="tiempo">Menor Tiempo</option>
                            <option value="transbordos">Menos Transbordos</option>
                            <option value="costo">Menor Costo</option>
                        </select>
                    </div>

                    <button id="calcularRuta" class="calculate-btn">
                        <i class="fas fa-calculator"></i>
                        Calcular Ruta Óptima
                    </button>

                    <button id="limpiarRuta" class="clear-btn" style="display: none;">
                        <i class="fas fa-eraser"></i>
                        Limpiar Ruta
                    </button>
                </div>

                <div class="disruptions-panel">
                    <h3><i class="fas fa-exclamation-triangle"></i> Eventos Disruptivos</h3>
                    <div class="disruption-controls">
                        <label for="estacionCerrada">Estación con Problemas:</label>
                        <select id="estacionCerrada" class="station-select">
                            <option value="">Sin interrupciones</option>
                        </select>
                        
                        <label for="lineaCerrada">Línea Específica (opcional):</label>
                        <select id="lineaCerrada" class="station-select">
                            <option value="">Cerrar toda la estación</option>
                            <option value="A">Línea A (Metro)</option>
                            <option value="B">Línea B (Metro)</option>
                            <option value="T">Línea T (Tranvía)</option>
                            <option value="1">Línea 1 (Bus)</option>
                            <option value="2">Línea 2 (Bus)</option>
                            <option value="P">Línea P (MetroCable)</option>
                            <option value="J">Línea J (MetroCable)</option>
                            <option value="K">Línea K (MetroCable)</option>
                            <option value="M">Línea M (MetroCable)</option>
                            <option value="H">Línea H (MetroCable)</option>
                        </select>
                        
                        <label for="factorRetraso">Factor de Retraso:</label>
                        <select id="factorRetraso" class="station-select">
                            <option value="1">Normal (1x)</option>
                            <option value="1.5">Lluvia Moderada (1.5x)</option>
                            <option value="2">Lluvia Intensa (2x)</option>
                            <option value="2.5">Mantenimiento (2.5x)</option>
                        </select>

                        <div class="disruption-buttons">
                            <button id="aplicarDisrupciones" class="disruption-btn">
                                <i class="fas fa-cog"></i>
                                Aplicar Cambios
                            </button>
                            
                            <button id="resetDisrupciones" class="disruption-btn reset-btn">
                                <i class="fas fa-refresh"></i>
                                Restablecer
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="results-panel">
                <div id="routeResults" class="route-results hidden">
                    <h2><i class="fas fa-directions"></i> Resultado de la Ruta</h2>
                    <div id="routeInfo" class="route-info"></div>
                    <div id="routePath" class="route-path"></div>
                    <div id="routeStats" class="route-stats"></div>
                </div>

                <div class="network-visualization">
                    <div class="visualization-header">
                        <h2><i class="fas fa-project-diagram"></i> Red de Transporte</h2>
                    </div>
                    
                    <div id="networkGraph" class="network-graph">
                        <svg id="metroSvg" width="100%" height="1100">
                            <!-- El grafo se generará dinámicamente -->
                        </svg>
                    </div>
                </div>
            </div>
        </main>

        <div class="legend">
            <h3><i class="fas fa-info-circle"></i> Sistema de Transporte Público - Medellín</h3>
            <div class="legend-items">
                <!-- Metro -->
                <div class="legend-category">
                    <h4><i class="fas fa-subway"></i> Metro</h4>
                </div>
                <div class="legend-item metro-line">
                    <span class="legend-color linea-a"></span>
                    <span>Línea A </span>
                </div>
                <div class="legend-item metro-line">
                    <span class="legend-color linea-b"></span>
                    <span>Línea B </span>
                </div>
                
                <!-- Tranvía -->
                <div class="legend-category">
                    <h4><i class="fas fa-train"></i> Tranvía</h4>
                </div>
                <div class="legend-item tranvia-line">
                    <span class="legend-color linea-t"></span>
                    <span>Línea T </span>
                </div>
                
                <!-- Buses de Tránsito Rápido -->
                <div class="legend-category">
                    <h4><i class="fas fa-bus"></i> Metroplus</h4>
                </div>
                <div class="legend-item bus-line">
                    <span class="legend-color linea-1"></span>
                    <span>Línea 1 Buses</span>
                </div>
                <div class="legend-item bus-line">
                    <span class="legend-color linea-2"></span>
                    <span>Línea 2 Buses</span>
                </div>
                
                <!-- MetroCable -->
                <div class="legend-category">
                    <h4><i class="fas fa-mountain"></i> MetroCable</h4>
                </div>
                <div class="legend-item cable-line">
                    <span class="legend-color linea-p"></span>
                    <span>Línea P </span>
                </div>
                <div class="legend-item cable-line">
                    <span class="legend-color linea-j"></span>
                    <span>Línea J </span>
                </div>
                <div class="legend-item cable-line">
                    <span class="legend-color linea-k"></span>
                    <span>Línea K </span>
                </div>
                <div class="legend-item cable-line">
                    <span class="legend-color linea-m"></span>
                    <span>Línea M </span>
                </div>
                <div class="legend-item cable-line">
                    <span class="legend-color linea-h"></span>
                    <span>Línea H </span>
                </div>
            </div>
        </div>

        <footer class="footer">
            <p>© 2025 Sistema Metro Medellín - Proyecto Universitario | Algoritmos de Grafos y Dijkstra</p>
        </footer>
    </div>

    <script src="metroData.js"></script>
    <script src="dijkstra.js"></script>
    <script src="visualization.js"></script>
    <script src="app.js"></script>
</body>
</html>